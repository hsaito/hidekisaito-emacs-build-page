<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>How to Build Emacs on Various Platforms</title>
<!-- 2013-04-18 Thu 18:57 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="generator" content="Org-mode"/>
<meta name="author" content="Hideki Saito"/>
<meta name="description" content="Explaining how to build Emacs on various platforms"/>
<meta name="keywords" content="Emacs, software, OSS, compile, build"/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-114515-36', 'hclippr.org');
ga('send', 'pageview');
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">How to Build Emacs on Various Platforms</h1>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Why compile your own binary?</h2>
<div class="outline-text-2" id="text-1">
<p>
There are good reason to compile your own binary, in general&#x2026;
</p>
<ul class="org-ul">
<li>You can ensure what you are getting is what comes out from the source code.
</li>
<li>You can have your own customizations. For instance, if you are managing software for your work, you may include your work specific modifications to the source code.
</li>
<li>Relatively safer way of protecting you from possible contamination of malware. Although, to ensure this, you will probably have to build toolchains as well. Because if your tools used to compile your own binary is contaminated, it is possible that your resulting binary can be bogus.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Instructions for each platform</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">Windows</h3>
<div class="outline-text-3" id="text-2-1">
</div><div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1">Getting files</h4>
<div class="outline-text-4" id="text-2-1-1">
</div><ul class="org-ul"><li>Source<br/><div class="outline-text-5" id="text-2-1-1-1">
<p>
Get the tarball from <a href="http://www.gnu.org/software/emacs/">GNU Emacs</a> page.
</p>
</div>
</li>

<li>Build Tools<br/><div class="outline-text-5" id="text-2-1-1-2">
<p>
You will need some build tools. <a href="http://www.mingw.org/">MinGW</a> provides tools you need in order to compile Emacs. Specifically, you need <b>make</b> and <b>gcc</b> tools from MinGW.
</p>

<p>
The <b>makeinfo</b> tool from <a href="http://gnuwin32.sourceforge.net/packages/texinfo.htm">TexInfo</a> is also required.<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>

<p>
The <a href="http://gnuwin32.sourceforge.net/packages/coreutils.htm">CoreUtils</a> provides many of required tools, so install it, too.
</p>
</div>
</li>
<li>Dependencies<br/><div class="outline-text-5" id="text-2-1-1-3">
<p>
In addition, you may want to install the following dependencies. Using setup application is far easier way of handling this.
</p>
<ul class="org-ul">
<li><a href="http://gnuwin32.sourceforge.net/packages/libpng.htm">LibPng</a>
</li>
<li><a href="http://gnuwin32.sourceforge.net/packages/jpeg.htm">Jpeg</a>
</li>
<li><a href="http://gnuwin32.sourceforge.net/packages/giflib.htm">GIfLib</a>
</li>
<li><a href="http://gnuwin32.sourceforge.net/packages/tiff.htm">Tiff</a>
</li>
<li><a href="http://www.zlatkovic.com/libxml.en.html">LibXml</a>
</li>
<li><a href="http://www.gnutls.org/">GnuTLS</a>
</li>
<li><a href="http://gnuwin32.sourceforge.net/packages/xpm.htm">XPM</a>
</li>
</ul>
</div>
</li></ul>
</div>
<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2">Compile Procedures</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
First, go to <i>nt</i> directory within the uncompressed Emacs source file.
</p>

<p>
Before proceeding, temporarily turn off your malware scanners. Yes, I meant it. Some of stricter malware scanners cause false alarm while building Emacs and can cause the build process to fail. 
</p>

<p>
Issue the following command where <i>path-to-dependency-includes</i> being place of your includes (*.h) files. 
</p>
<blockquote>
<p>
<code>configure.bat &#x2013;with-gcc &#x2013;cflags -I /path-to-dependency-includes/</code>
</p>
</blockquote>

<p>
The following command will make the build
</p>


<blockquote>
<p>
<code>make</code>
</p>
</blockquote>

<p>
If you choose to do so, you can also compile your own set of compiled Emacs Lisp file. (this step is necessary if you are compiling from version control source &#x2013; it is optional if you are using tarball from the official release.) This process will take fairly long time to complete.
</p>

<blockquote>
<p>
<code>make bootstrap</code>
</p>
</blockquote>


<p>
The following command will then make distribution file.<sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup> I found it easier to just make dist file first then issuing <i>make install</i> &#x2013; this way, you can install your Emacs distribution to any places of your choice.
</p>


<blockquote>
<p>
<code>make dist</code>
</p>
</blockquote>
</div>
</div>
<div id="outline-container-sec-2-1-3" class="outline-4">
<h4 id="sec-2-1-3">Other Information</h4>
<div class="outline-text-4" id="text-2-1-3">
<ul class="org-ul">
<li><a href="http://ourcomments.org/Emacs/w32-build-emacs.html">Building Emacs on MS Windows</a>, although based on the older Emacs distributions, many of parts are still pertinent.
</li>
<li>The <i>INSTALL</i> file within <i>nt</i> directory inside Emacs source titled <i>Building and Installing Emacs on Windows (from 95 to 7 and beyond)</i> explains details about building process.
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">Linux</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Compiling Emacs on Linux is straightforward. Make sure you have gcc and other utilities installed, and then you can issue ./configure, make (or make bootstrap) and then make install.
</p>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">Mac</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Compiling on Mac is fairly easy. You will need to make sure that development tools (gcc, etc.) are downloaded from Apple's site to begin.
</p>

<p>
As Mac OS X is an UNIX system, it is actually possible to compile manner similar to Linux; that is as console and with X11 lib. The binary I am distributing on this site is packaged .app file, and it can be compiled right out from the box as well.
</p>

<p>
Similar to Linux, except when you configure, pass with-ns argument, thus:
</p>

<blockquote>
<p>
<code>./configure &#x2013;with-ns</code>
</p>
</blockquote>

<p>
Then as with Linux, you can make (or make bootstrap) the build.
</p>

<p>
After it is done compiling, you need to make install it.
</p>

<blockquote>
<p>
<code>make install</code>
</p>
</blockquote>

<p>
This command will not "install" the build in a sense performed when you do the same on Linux. It creates Emacs.app in <i>nextstep</i> directory.
</p>

<p>
Then you can move this file to <i>Application</i> directory or other favorite directory of your choice and run just like any other Mac applications.
</p>

<p>
Instructions of how to make Mac version of Emacs can be found in <i>INSTALL</i> file within nextstep directory.
</p>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p>I found that the latest version of TexInfo crashes while processing Emacs files &#x2013; you may want <a href="http://sourceforge.net/projects/gnuwin32/files/texinfo/4.8/">4.8</a> instead.</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p>You will need <i>7z.exe</i> in the path to this to work.</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Hideki Saito</p>
<p class="date">Created: 2013-04-18 Thu 18:57</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.0)</p>
<p class="xhtml-validation"><a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a></p>
</div>
</body>
</html>